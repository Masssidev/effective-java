# 열거형(enum)과 어노테이션
자바 1.5에는 새로운 참조 자료형(reference type)이 추가되었다. **열거 자료형: enum type**이라 불리는 새로운 종류의 클래스와, **어노테이션 자료형**이라 불리는 새로운 종류의 인터페이스다.
<hr/>

### 규칙 30. int 상수 대신 enum을 사용하라 
열거 자료형은 고정 개수의 상수들로 값이 구성되는 자료형이다. 자바에 enum이라는 새로운 자료형이 도입되기 전에는 통상 int 형의 상수들을 정의해서 열거 자료형을 흉내 냈다. 기존의 int enum, String enum 패턴에는 여러 문제점들이 있어 자바 1.5부터는 이러한 문제점들을 해소하기위해 enum 자료형을 도입한것이다.
* enum 자료형은 컴파일 시점 형 안전성을 제공한다. 
* enum 자료형은 같은 이름의 상수가 평화롭게 공존할 수 있도록 한다. 이름공간(namespace)이 분리되기 때문이다.
* enum 자료형은 임의의 메서드나 필드도 추가할 수 있다.
###### 요약
enum 자료형은 int 상수에 비해 많은 중요한 장점을 가지고 있다. enum을 사용한 코드는 가독성도 높고, 안전하며, 더 강력하다. 상당수의 enum은 생성자나 멤버가 필요 없으나, 데이터 또는 그 데이터에 관계된 메서드를 추가해서 기능을 향상시킨 enum도 많다. 드물게는 동일한 메서드가 상수별로 다르게 동작하도록 만들어야 하는 enum도 있다. 이런 enum을 만들 때는 switch 문 대신 상수별 메서드를 구현하는 것이 좋다. 여러 enum 상수가 공통 기능을 이용해야 하는 일이 생길 때는 정책 enum 패턴 사용을 고려해야 한다.
<hr/>

### 규칙 31. ordinal 대신 객체 필드를 사용하라
상당수의 enum 상수는 자연스럽게 int 값 하나에 대응된다. 모든 enum에는 ordinal이라는 메서드가 있는데, enum 자료형 안에서 enum 상수의 위치를 나타내는 정수값을 반환한다.

하지만 이 메서드를 사용하면 상수 순서를 변경하지 못하거나 새로운 상수를 추가할 수 없는 등 유지보수 관점에서 끔찍한 코드를 만들게 된다.
> enum 상수에 연계되는 값을 ordinal을 사용해 표현하지 말아야 한다. 이런 값이 필요하다면 객체 필드(instance field)에 저장해야 한다.
<hr/>

### 규칙 32. 비트 필드(bit field) 대신 EnumSet을 사용하라
집합을 비트 필드로 나타내면 비트 단위 산술 연산을 통해 합집합이나 교집합 등의 집합 연산도 효율적으로 실행할 수 있다. 하지만 비트 필드는 int enum 패턴과 똑같은 단점들을 갖고 있다. EnumSet이라는 클래스를 사용하면 특정한 enum 자료형의 값으로 구성된 집합을 효율적으로 표현할 수 있다. 

이 클래스는 Set 인터페이스를 구현하며, Set이 제공하는 풍부한 기능들을 그대로 제공할 뿐 아니라 형 안전성, 그리고 다른 Set 구현들과 같은 수준의 상호운용성도 제공한다.
###### 요약
열거 자료형을 집합에 사용해야 한다고 해서 비트 필드로 표현하면 곤란하다. EnumSet 클래스는 비트 필드만큼 간결하고 성능도 우수할 뿐 아니라, enum 자료형의 여러 가지 장점을 전부 갖추고 있다.
<hr/>

### 규칙 33. ordinal을 배열 첨자로 사용하는 대신 EnumMap을 이용하라
ordinal 값을 배열 첨자로 사용하는 것은 적절치 않다. EnumMap을 사용할 수 있다. 

EnumMap의 성능이 ordinal 값을 배열 첨자로 쓰는 기법과 속도 면에서 별 차이가 없는 것은 EnumMap이 이미 그런 배열을 내부적으로 사용하고 있기 때문이다. 

EnumMap 생성자는 키의 자료형을 나타내는 Class 객체를 인자로 받는다. 이런 Class 객체를 한정적 자료형 토큰이라 부르는데, 실행시점 제네릭 자료형 정보를 제공한다. 
<hr/>

### 규칙 34. 확장 가능한 enum을 만들어야 한다면 인터페이스를 이용하라
형 안전 enum 패턴을 쓸 경우에는 다른 열거 자료형을 계승해서 새로운 열거 자료형을 만드는 것이 가능하지만 enum 자료형으로는 그럴 수 없다. 

API 사용자가 API가 기본 제공하는 연산 집합을 확장하여 자기만의 연산을 추가할 수 있도록 해야 할 때 enum 자료형이 임의의 인터페이스를 구현하는 것이다. 
> 계승 가능 enum 자료형은 만들 수 없지만, 인터페이스를 만들고 그 인터페이스를 구현하는 기본 enum 자료형을 만들면 계승 가능 enum 자료형을 흉내 낼 수 있다. 

> 이렇게 하면 클라이언트가 해당 인터페이스를 구현하는 enum 자료형을 손수 만들 수 있다. API가 인터페이스를 이용해 작성되었다면, 그런 enum 자료형은 기본 enum 자료형이 쓰이는 곳에는 어디든 사용할 수 있다.
<hr/>

### 규칙 35. 작명 패턴 대신 어노테이션을 사용하라
자바 1.5 이전에는 도구나 프레임워크가 특별히 취급해야 하는 프로그램 요소를 구별하기 위해 작명 패턴을 썼다.
###### 작명 패턴의 단점
1. 철자를 틀리면 알아채기 힘들다.
2. 특정한 프로그램 요소에만 적용되도록 만들 수 없다.
> 어노테이션은 이 모든 문제를 해결한다.

어노테이션 자료형 선언부에 붙는 어노테이션은 메타-어노테이션이라 부른다.
> 프로그래머가 소스 파일에 정보를 추가할 수 있도록 하는 도구를 만들고 싶다면, 어떤 어노테이션 자료형이 필요한지 찾아서 만들어야 한다. 어노테이션이 있으므로 더 이상은 작명 패턴에 기대면 안 된다.

> 대부분의 프로그래머는, 도구 개발에 관심 있는 개발자가 아니라면, 어노테이션 자료형을 정의할 필요가 없다. 그렇더라도 모든 프로그래머는 자바 플랫폼이 제공하는 어노테이션 자료형들을 사용하도록 해야 한다.
<hr/>

### 규칙 36. Override 어노테이션은 일관되게 사용하라
Override 어노테이션은 메서드 선언부에만 사용할 수 있고, 상위 자료형(supertype)에 선언된 메서드를 재정의한다는 사실을 표현한다. 이 어노테이션을 일관되게 사용하면 끔찍한 버그들을 방지할 수 있다.
> 상위 클래스에 선언된 메서드를 재정의할 때는 반드시 선언부에 Override 어노테이션을 붙여야 한다.
<hr/>

### 규칙 37. 자료형을 정의할 때 표식 인터페이스를 사용하라
**표식 인터페이스**는 아무 메서드도 선언하지 않는 인터페이스다. 클래스를 만들 때 표식 인터페이스를 구현하는 것은, 해당 클래스가 어떤 속성을 만족한다는 사실을 표시하는 것과 같다. 
###### 표식 어노테이션과 비교했을 때, 표식 인터페이스의 장점
1. 표식 인터페이스는 결국 표식 붙은 클래스가 만드는 객체들이 구현하는 자료형이다. 표식 어노테이션은 자료형이 아니다.
  * 따라서, 표식 어노테이션을 쓴다면 프로그램 실행 중에나 발견하게 될 오류를 컴파일 시점에 발견할 수 있다.
2. 적용 범위를 좀 더 세밀하게 지정할 수 있다.
  * 표식 인터페이스를 쓴다면, 특정 인터페이스를 extends 하도록 선언하기만 하면 되는 등 적용 범위를 세밀하게 지정할 수 있다.

※ 표식 어노테이션의 주된 장점은, 프로그램 안에서 어노테이션 자료형을 쓰기 시작한 뒤에도 더 많은 정보를 추가할 수 있다는 것이다. 기본값(default)을 갖는 어노테이션 자료형 요소들을 더해 나가면 된다.

> 클래스나 인터페이스 이외의 프로그램 요소에 적용되어야 하는 표식은 어노테이션으로 만들어야 한다. 

> 이 표식이 붙은 객체만 인자로 받을 수 있는 메서드를 만들거라면 어노테이션 대신 표식 인터페이스를 써야 한다. 그러면 해당 메서드의 인자 자료형으로 해당 인터페이스를 사용할 수 있어서, 컴파일 시간에 형 검사를 진행할 수 있게 된다.
